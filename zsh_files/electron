########## WORK ###########

# navigation
alias work='cd ~/Developer/does-work'
alias g-n='cd ~/Developer/electron-gn/src'
alias e='dv && g-n && cd electron'
alias libuv='dv && cd libuv'
alias enode='dv && cd node'
alias libcc='dv && cd libchromiumcontent'gn gen out/Debug --args="import(\"//electron/build/args/debug.gn\") $GN_EXTRA_ARGS"
alias repros='dv && cd repros'

# electron build commands
alias eb='g-n && gclient sync --with_branch_heads --with_tags && e'
alias ebd='g-n && ninja -C out/Debug electron:electron'

# rebuild node headers and run tests in ci mode
test_setup_run() {
  g-n && ebd
  ninja -C out/Debug third_party/electron_node:headers
  e && npm test -- --ci
}

# build and run a repro
build_run() {
  run_dir=$(pwd)
  {
    ebd && cd $run_dir
    erun $1
  } || {
    cd $run_dir
  }
}

# misc
alias ss='~/Developer/electron-gn/src/electron/external_binaries/sccache --start-server'

# electron run commands
alias erun='~/Developer/electron-gn/src/out/Debug/Electron.app/Contents/MacOS/Electron'
alias ebrun='build_run'
alias et='test_setup_run && e'

# electron debug commands
alias debug-spec='lldb -- ~/Developer/electron-gn/src/out/Debug/Electron.app/Contents/MacOS/Electron spec'
alias debug='lldb ~/Developer/electron-gn/src/out/Debug/Electron.app/Contents/MacOS/Electron'

# node commands
alias nb='./configure && make -j4'
alias nt='./configure && make -j4 test'
alias gt='tools/test.py -J `git show --name-only --pretty="" | grep 'test/'`'

# libuv stuff
alias lb='./gyp_uv.py -f make && make -C out'